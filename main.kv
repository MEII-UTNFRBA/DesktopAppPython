#:kivy 1.0
#:import Factory kivy.factory.Factory

<PuntoEnGrafico>:
    size: 7, 7
    canvas:
        Color:
            rgba: (1,0,0,1)
        Ellipse:
            pos: self.pos
            size: self.size
<Main>:
    punto: punto_graf

#    AsyncImage:
#        opacity: 1
#        size: self.texture_size
#    rgba: (1,0,0,1)
#        source: './Img/test.jpg'
#    allow_stretch: True

    canvas:
        Color:
            rgb: (0.2, 0.2, 0.2)
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        size: (200,50)
        pos_hint: {'center_x':0.867, 'center_y':0.935}
        AsyncImage:
            size: self.texture_size
            source: './Img/UTN_Logo.png'
#            allow_stretch: True

    Button:
        id: vna_connect
        size_hint: (None, None)
        height: 30
        width: 150
        pos_hint: {'center_x': 0.25, 'center_y':0.8}         # Con esto le digo donde va a estar
        font_size: 14
        text: "Conectar con equipo"
        # border: (0,0,0,0)
        bold: True
        text_size: (self.width, self.height)
        halign: 'center'
        valign: 'middle'
#        on_press: root.manager.current = 'trabajador_screen'
#        on_press: Factory.VNAConnectPopup()
        on_press: root.vna_popup()

    Button:
        id: arduino_connect
        size_hint: (None, None)
        height: 30
        width: 150
        pos_hint: {'center_x': 0.25, 'center_y':0.65}         # Con esto le digo donde va a estar
        font_size: 14
        text: "Conectar con Arduino"
        # border: (0,0,0,0)
        bold: True
        text_size: (self.width, self.height)
        halign: 'center'
        valign: 'middle'
        on_press: root.arduino_popup()


    BoxLayout:
        id: smith
        size_hint: (None,None)
        size: (300,300)
        pos_hint: {'center_x':0.8, 'center_y':0.27}
        canvas.before:
            Color:
                rgba: (0.95, 0.95, 0.95, 1)
            Rectangle:
                pos: self.pos
                size: self.size
        AsyncImage:
            id:mongoimg
            opacity: 1
            size: self.texture_size
            source: './Img/smith_chart.png'
            allow_stretch: True
            PuntoEnGrafico:
                id: punto_graf
                center: self.parent.center

    BoxLayout:
        id: port_text
        size_hint: (None,None)
        size: (240,30)
        opacity: 1
        pos_hint: {'center_x':0.25, 'center_y':0.6}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: root.arduino_conectado
            color: 0,0,0,1
            bold: 1
            background_color:

    BoxLayout:
        id: vna_text
        size_hint: (None,None)
        size: (240,30)
        opacity: 1
        pos_hint: {'center_x':0.25, 'center_y':0.75}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: root.vna_showname
            color: 0,0,0,1
            bold: 1
            background_color:

    BoxLayout:
        id: ang_input
        size_hint: (None,None)
        size: (120,35)
        opacity: 1
        pos_hint: {'center_x':0.68, 'center_y':0.66}
        TextInput:
            id: ang_input_text
            multiline: False
            font_size: 20
            on_text_validate: root.ang_sel

    BoxLayout:
        id: vna_text
        size_hint: (None,None)
        size: (120,30)
        opacity: 1
        pos_hint: {'center_x':0.68, 'center_y':0.72}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: "√Ångulo deseado:"
            color: 0,0,0,1
            bold: 1
            background_color:

    Button:
        id: ok
        size_hint: (None, None)
        height: 30
        width: 120
        pos_hint: {'center_x': 0.68, 'center_y':0.6}         # Con esto le digo donde va a estar
        font_size: 14
        text: "OK"
        # border: (0,0,0,0)
        bold: True
        text_size: (self.width, self.height)
        halign: 'center'
        valign: 'middle'
        on_press: root.ang_sel_fnc()

    Button:
        id: start
        size_hint: (None, None)
        height: 30
        width: 100
        pos_hint: {'center_x': 0.2, 'center_y':0.4}         # Con esto le digo donde va a estar
        font_size: 14
        text: "Comenzar"
        # border: (0,0,0,0)
        bold: True
        text_size: (self.width, self.height)
        halign: 'center'
        valign: 'middle'
        on_press: root.start_fnc()

    Button:
        id: stop
        size_hint: (None, None)
        height: 30
        width: 100
        pos_hint: {'center_x': 0.2, 'center_y':0.3}         # Con esto le digo donde va a estar
        font_size: 14
        text: "Detener"
        # border: (0,0,0,0)
        bold: True
        text_size: (self.width, self.height)
        halign: 'center'
        valign: 'middle'
        on_press: root.stop_fnc()


    BoxLayout:
        id: mod_text
        size_hint: (None,None)
        size: (150,30)
        opacity: 1
        pos_hint: {'center_x':0.88, 'center_y':0.72}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: root.modulo_out
            color: 0,0,0,1
            bold: 1
            background_color:

    BoxLayout:
        id: ang_text
        size_hint: (None,None)
        size: (150,30)
        opacity: 1
        pos_hint: {'center_x':0.88, 'center_y':0.66}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: root.angulo_out
            color: 0,0,0,1
            bold: 1
            background_color:

    BoxLayout:
        id: z_text
        size_hint: (None,None)
        size: (150,30)
        opacity: 1
        pos_hint: {'center_x':0.88, 'center_y':0.6}
        canvas.before:
            Color:
                rgba: (1,1,1,1)
            Rectangle:
                pos: self.pos
                size: self.size
        Label:
            size: self.size
            text: root.z_out
            color: 0,0,0,1
            bold: 1
            background_color: